{% extends "base.html.j2" %}

{% block title %}
    Lakeside Clubs
{% endblock %}

{% block body %}
    <div id = "clubs-list-container">
        <h1 id = "clubs-list-title">Lakeside Clubs</h1>

        {% set ns = namespace(last_membership_type = None) %}
        {% for club in clubs %}
            {% if ns.last_membership_type != club.membership_type %}
                {% if club.membership_type == 1 %}
                    <h2 class = "clubs-list-header">Clubs You Lead</h2>
                {% elif club.membership_type == 0 %}
                    <h2 class = "clubs-list-header">Clubs You've Joined</h2>
                {% else %}
                    <h2 class = "clubs-list-header">Other Clubs</h2>
                {% endif %}
            {% endif %}
            {% set ns.last_membership_type = club.membership_type %}

            <div class = "club-card">
                <a href = "club?id={{club.id}}">
                    <h2>{{club.name}}</h2>
                </a>
                <p>{{club.description}}</p>
                {% if club.membership_type == None %}
                    <button class = "join-club-button" onclick = "joinClub({{club.id}}, {{g.user.authenticated|tojson}}, this);">Join club!</button>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock %}