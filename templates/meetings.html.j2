{% extends "base.html.j2" %}

{% block title %}
    Club Meetings
{% endblock %}

{% block body %}
    <div id = "meetings-list">
        <h1>Upcoming Club Meetings</h1>
        <div class = "tab-bar">
            <button type = "button" class = "tab-button is-active" data-tab-target = "meetings-panel">Meetings</button>
            <button type = "button" class = "tab-button" data-tab-target = "announcements-panel">Announcements</button>
        </div>
        <div class = "tab-panel" id = "meetings-panel">
            <div class = "tab-bar">
                <button type = "button" class = "tab-button is-active" data-tab-target = "meetings-all-panel">All Meetings</button>
                <button type = "button" class = "tab-button" data-tab-target = "meetings-yours-panel">Your Meetings</button>
            </div>

            <div class = "tab-panel" id = "meetings-all-panel">
                {% set ns = namespace(exists_meeting = false) %}
                {% for meeting in meetings %}
                    {% if meeting.is_meeting %}
                        {{ macros.render_meeting_card(meeting, true, false) }}
                        {% set ns.exists_meeting = true %}
                    {% endif %}
                {% endfor %}
                {% if not ns.exists_meeting %}
                    <h2 class = "no-meetings">
                        No Meetings Found
                    </h2>
                {% endif %}
            </div>

            <div class = "tab-panel" id = "meetings-yours-panel" hidden>
                {% set ns.exists_meeting = false %}
                {% for meeting in meetings %}
                    {% if meeting.is_meeting and meeting.is_member %}
                        {{ macros.render_meeting_card(meeting, true, false) }}
                        {% set ns.exists_meeting = true %}
                    {% endif %}
                {% endfor %}
                {% if not ns.exists_meeting %}
                    <h2 class = "no-meetings">
                        No Meetings Found
                    </h2>
                {% endif %}
            </div>
        </div>

        <div class = "tab-panel" id = "announcements-panel" hidden>
            <div class = "tab-bar">
                <button type = "button" class = "tab-button is-active" data-tab-target = "announcements-all-panel">All Announcements</button>
                <button type = "button" class = "tab-button" data-tab-target = "announcements-yours-panel">Your Announcements</button>
            </div>

            <div class = "tab-panel" id = "announcements-all-panel">
                {% set ns.exists_meeting = false %}
                {% for meeting in meetings %}
                    {% if not meeting.is_meeting %}
                        {{ macros.render_meeting_card(meeting, false, false) }}
                        {% set ns.exists_meeting = true %}
                    {% endif %}
                {% endfor %}
                {% if not ns.exists_meeting %}
                    <h2 class = "no-meetings">
                        No Announcements Found
                    </h2>
                {% endif %}
            </div>

            <div class = "tab-panel" id = "announcements-yours-panel" hidden>
                {% set ns.exists_meeting = false %}
                {% for meeting in meetings %}
                    {% if not meeting.is_meeting and meeting.is_member %}
                        {{ macros.render_meeting_card(meeting, false, false) }}
                        {% set ns.exists_meeting = true %}
                    {% endif %}
                {% endfor %}
                {% if not ns.exists_meeting %}
                    <h2 class = "no-meetings">
                        No Announcements Found
                    </h2>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
